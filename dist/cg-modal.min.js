(()=>{"use strict";function t(t,o){for(var e=0;e<o.length;e++){var n=o[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o=function(){function o(t){!function(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(this,o),this._activeClass="active",this.options=Object.assign({selector:".js-modal",openButton:".js-open-modal-btn",closeButton:".js-close-modal-btn",contentClass:"js-modal-content",effect:null,speed:300,position:"center",beforeOpen:function(){},afterOpen:function(){},beforeClose:function(){},afterClose:function(){},onOpenBtnClick:function(){}},t),this.modals=null,this.documentBody=document.body,this.init()}var e,n;return e=o,(n=[{key:"init",value:function(){var t=this;this.modals=document.querySelectorAll("".concat(this.options.selector)),this.modals?(this.modals.forEach((function(o){t.hasEffect(t.options.effect)&&o.classList.add("".concat(t.options.effect)),!o.classList.contains("js-modal")&&o.classList.add("js-modal"),o.classList.add("".concat(t.options.position)),t.options.speed&&t._isNumeric(t.options.speed)&&o.style.setProperty("--speed",parseFloat(t.options.speed/1e3)+"s")})),this._eventsHandler()):console.error('Не найден элемент с селектором "'.concat(this.options.selector,'"'))}},{key:"_eventsHandler",value:function(){var t=this,o=document.querySelectorAll("".concat(this.options.openButton));o?o.forEach((function(o){o.addEventListener("click",(function(o){t.options.onOpenBtnClick(),o.stopPropagation(),t.open("".concat(o.currentTarget.dataset.openModal))}))})):console.error('Не найден элемент с селектором "'.concat(this.options.openButton,'"')),this.modals.forEach((function(o){var e=o.querySelectorAll("".concat(t.options.closeButton));e&&e.forEach((function(e){e.addEventListener("click",(function(e){e.stopPropagation(),t.close(o)}))}));var n=o.querySelector(".".concat(t.options.contentClass));n?(!n.classList.contains("js-modal-content")&&n.classList.add("js-modal-content"),n.addEventListener("click",(function(t){t.stopPropagation()}))):console.error('Не найден элемент ".'.concat(t.options.contentClass,'"'))})),this.documentBody.addEventListener("click",(function(){!1!==t.hasActiveModal()&&t.closeActive()})),document.onkeydown=function(o){!1!==t.hasActiveModal()&&27==(o=o||window.event).keyCode&&t.closeActive()}}},{key:"open",value:function(t){this.options.beforeOpen();var o=document.querySelector("[data-modal=".concat(t,"]"));o?(o.classList.add("".concat(this._activeClass)),this.documentBody.style.overflow="hidden",this.options.afterOpen()):console.error("Не найдено соответствующее окно с атрибутом равным ".concat(t))}},{key:"close",value:function(t){this.options.beforeClose(),t.classList.remove("".concat(this._activeClass)),this.documentBody.style.overflow="",this.options.afterClose()}},{key:"closeActive",value:function(){var t=this.hasActiveModal();!1!==t&&this.close(t)}},{key:"hasActiveModal",value:function(){return!!document.querySelector("".concat(this.options.selector,".").concat(this._activeClass))&&document.querySelector("".concat(this.options.selector,".").concat(this._activeClass))}},{key:"_isNumeric",value:function(t){return!isNaN(parseFloat(t))&&isFinite(t)}},{key:"hasEffect",value:function(t){return!(!t||-1==["fade","transformLeft","transformRight","transformTop","transformBottom","scaleCenter"].indexOf(t.toString().trim()))}}])&&t(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),o}();window.CgModal=o})();